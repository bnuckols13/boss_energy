<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss Energy - DBT Boundary Setting for Teens</title>
    <style>
        /* Teen-Friendly Color Palette */
        :root {
            --primary-bold: #FF6B6B;
            --primary-bold-light: #FF8787;
            --primary-bold-dark: #E55555;
            --secondary-cool: #4ECDC4;
            --secondary-cool-light: #6DD5CD;
            --accent-energy: #FFD93D;
            --accent-energy-light: #FFE066;
            --neutral-light: #FAF9F6;
            --neutral-soft: #E8E8E8;
            --neutral-medium: #C7C7C7;
            --text-primary: #2D3436;
            --text-secondary: #636E72;
            --text-light: #95A5A6;
            --success: #6BCF7F;
            --success-light: #8DD99C;
            --warning: #FFA502;
            --warning-light: #FFB841;
            --confidence-purple: #A29BFE;
            --power-pink: #FD79A8;
            --chill-blue: #74B9FF;
            --shadow-soft: rgba(0, 0, 0, 0.08);
            --shadow-medium: rgba(0, 0, 0, 0.12);
            --shadow-strong: rgba(0, 0, 0, 0.18);
            --gradient-boss: linear-gradient(135deg, var(--primary-bold), var(--power-pink));
            --gradient-energy: linear-gradient(135deg, var(--accent-energy), var(--warning));
            --gradient-cool: linear-gradient(135deg, var(--secondary-cool), var(--chill-blue));
            --gradient-confidence: linear-gradient(135deg, var(--confidence-purple), var(--power-pink));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #FFEAA7 0%, #FDCB6E 25%, #FD79A8 50%, #A29BFE 75%, #74B9FF 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Animated Background Elements */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.1;
            pointer-events: none;
        }

        .energy-burst {
            position: absolute;
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }

        .energy-burst:nth-child(1) {
            width: 100px;
            height: 100px;
            background: var(--gradient-boss);
            top: 10%;
            left: 15%;
            animation-delay: 0s;
        }

        .energy-burst:nth-child(2) {
            width: 150px;
            height: 150px;
            background: var(--gradient-energy);
            top: 70%;
            right: 10%;
            animation-delay: 3s;
        }

        .energy-burst:nth-child(3) {
            width: 80px;
            height: 80px;
            background: var(--gradient-confidence);
            bottom: 30%;
            left: 40%;
            animation-delay: 6s;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1); 
                opacity: 0.1;
            }
            33% { 
                transform: translateY(-30px) rotate(120deg) scale(1.1); 
                opacity: 0.15;
            }
            66% { 
                transform: translateY(30px) rotate(240deg) scale(0.9); 
                opacity: 0.1;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Header with Teen Energy */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            color: var(--text-primary);
            padding: 35px;
            border-radius: 24px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 40px var(--shadow-medium);
            position: relative;
            overflow: hidden;
            border: 3px solid var(--primary-bold);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-boss);
        }

        .header h1 {
            font-size: 3em;
            font-weight: 800;
            margin-bottom: 10px;
            background: var(--gradient-boss);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1.3em;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Progress Bar with Energy */
        .progress-container {
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 20px var(--shadow-soft);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-label {
            font-weight: 700;
            color: var(--text-secondary);
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .progress-percentage {
            font-weight: 700;
            color: var(--primary-bold);
            font-size: 1.2em;
        }

        .progress-bar {
            width: 100%;
            height: 14px;
            background: var(--neutral-soft);
            border-radius: 7px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-boss);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 7px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progress-shine 2s infinite;
        }

        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Phase Navigation - Teen Style */
        .phase-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .phase-btn {
            background: white;
            border: 3px solid var(--neutral-soft);
            padding: 16px 24px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            min-width: 160px;
            justify-content: center;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9em;
        }

        .phase-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 30px var(--shadow-medium);
            border-color: var(--primary-bold);
        }

        .phase-btn.active {
            background: var(--gradient-boss);
            color: white;
            border-color: var(--primary-bold);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
            }
            50% { 
                box-shadow: 0 10px 40px rgba(255, 107, 107, 0.5);
            }
        }

        .phase-btn.completed {
            background: var(--gradient-energy);
            color: white;
            border-color: var(--accent-energy);
        }

        .phase-btn.completed::after {
            content: '✓';
            position: absolute;
            top: 5px;
            right: 10px;
            background: white;
            color: var(--accent-energy);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .phase-time {
            font-size: 0.8em;
            opacity: 0.8;
        }

        /* Content Area */
        .content-area {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 10px 40px var(--shadow-medium);
            margin-bottom: 30px;
            min-height: 500px;
            position: relative;
            overflow: hidden;
        }

        .content-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-boss);
        }

        /* Phase Content */
        .phase-content {
            display: none;
            opacity: 0;
        }

        .phase-content.active {
            display: block;
            animation: fadeInUp 0.6s ease-out forwards;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Energy Check-In Visualization */
        .energy-visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .energy-option {
            background: var(--neutral-light);
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .energy-option:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px var(--shadow-medium);
        }

        .energy-option.selected {
            border-color: var(--primary-bold);
            background: var(--gradient-boss);
            color: white;
            transform: scale(1.08);
        }

        .energy-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }

        /* Check-in Categories */
        .checkin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .checkin-card {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(253, 121, 168, 0.1));
            padding: 30px;
            border-radius: 20px;
            border-left: 5px solid var(--primary-bold);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkin-card:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 30px var(--shadow-soft);
        }

        .checkin-card h3 {
            color: var(--primary-bold);
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .checkin-prompts {
            list-style: none;
            padding: 0;
        }

        .checkin-prompts li {
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .checkin-prompts li:hover {
            background: var(--primary-bold);
            color: white;
            transform: translateX(8px);
        }

        .checkin-prompts li.selected {
            background: var(--gradient-boss);
            color: white;
        }

        /* BOSS Framework Display */
        .boss-framework {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .boss-step {
            background: white;
            border: 3px solid var(--primary-bold);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .boss-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--shadow-medium);
            background: var(--gradient-boss);
            color: white;
        }

        .boss-letter {
            font-size: 3em;
            font-weight: 800;
            color: var(--primary-bold);
            display: block;
            margin-bottom: 10px;
        }

        .boss-step:hover .boss-letter {
            color: white;
        }

        .boss-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .boss-description {
            font-size: 0.95em;
            line-height: 1.5;
        }

        /* Scenario Practice Cards */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .scenario-card {
            background: white;
            border-radius: 20px;
            padding: 28px;
            box-shadow: 0 6px 25px var(--shadow-soft);
            border: 3px solid var(--neutral-soft);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .scenario-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-boss);
            transform: scaleX(0);
            transition: transform 0.4s;
        }

        .scenario-card:hover::before {
            transform: scaleX(1);
        }

        .scenario-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 35px var(--shadow-medium);
            border-color: var(--primary-bold);
        }

        .scenario-card.active {
            border-color: var(--primary-bold);
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.05), rgba(253, 121, 168, 0.05));
        }

        .scenario-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 18px;
        }

        .scenario-icon {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 26px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .scenario-title {
            font-size: 1.2em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .scenario-examples {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }

        .scenario-examples li {
            padding: 10px;
            margin: 8px 0;
            background: var(--neutral-light);
            border-radius: 10px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .scenario-examples li:hover {
            background: var(--primary-bold);
            color: white;
            transform: translateX(5px);
        }

        /* Response Practice Area */
        .practice-area {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(116, 185, 255, 0.1));
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
        }

        .practice-prompt {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .response-input {
            width: 100%;
            min-height: 120px;
            border: 3px solid var(--secondary-cool);
            border-radius: 12px;
            padding: 18px;
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        .response-input:focus {
            outline: none;
            border-color: var(--primary-bold);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .boss-phrases {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .phrase-chip {
            background: var(--gradient-boss);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9em;
        }

        .phrase-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.3);
        }

        /* Commitment Section */
        .commitment-card {
            background: var(--gradient-confidence);
            color: white;
            padding: 35px;
            border-radius: 20px;
            text-align: center;
            margin: 25px 0;
            box-shadow: 0 8px 30px rgba(162, 155, 254, 0.3);
        }

        .commitment-card h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .commitment-input {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-primary);
        }

        /* Buttons */
        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-boss {
            background: var(--gradient-boss);
            color: white;
        }

        .btn-energy {
            background: var(--gradient-energy);
            color: white;
        }

        .btn-cool {
            background: var(--gradient-cool);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px var(--shadow-medium);
        }

        /* Sound Toggle */
        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 3px solid var(--primary-bold);
            border-radius: 50px;
            padding: 14px;
            cursor: pointer;
            box-shadow: 0 4px 20px var(--shadow-medium);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sound-toggle:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 6px 25px var(--shadow-strong);
        }

        /* Notification System */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-boss);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 20px var(--shadow-medium);
            z-index: 2000;
            animation: slideUp 0.3s ease-out;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        /* Session Summary */
        #sessionSummary {
            display: none;
            background: white;
            border-radius: 24px;
            padding: 50px;
            box-shadow: 0 10px 40px var(--shadow-medium);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        #sessionSummary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-energy);
        }

        .summary-badge {
            background: var(--gradient-boss);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 8px 30px rgba(255, 107, 107, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .phase-nav {
                flex-direction: column;
                align-items: stretch;
            }
            
            .phase-btn {
                width: 100%;
            }
            
            .boss-framework,
            .scenario-grid,
            .checkin-grid {
                grid-template-columns: 1fr;
            }
            
            .energy-visualization {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .btn {
                padding: 14px 24px;
                font-size: 14px;
            }
        }

        /* Accessibility */
        *:focus-visible {
            outline: 3px solid var(--primary-bold);
            outline-offset: 2px;
        }

        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation">
        <div class="energy-burst"></div>
        <div class="energy-burst"></div>
        <div class="energy-burst"></div>
    </div>

    <!-- Sound Toggle -->
    <div class="sound-toggle" onclick="toggleSound()" title="Toggle Sound" role="button" aria-label="Toggle sound effects">
        <span id="sound-icon">🔊</span>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>⚡ Boss Energy ⚡</h1>
            <p>DBT Skills for Setting Boundaries & Saying No Like You Mean It</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <span class="progress-label">Your Boss Level</span>
                <span class="progress-percentage" id="progressPercentage">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Phase Navigation -->
        <nav class="phase-nav" role="navigation" aria-label="Session phases">
            <button class="phase-btn active" onclick="showPhase(0)" id="phase-0" aria-current="true">
                <span>⚡ Energy Check</span>
                <span class="phase-time">(7 min)</span>
            </button>
            <button class="phase-btn" onclick="showPhase(1)" id="phase-1">
                <span>💭 Check-In</span>
                <span class="phase-time">(15 min)</span>
            </button>
            <button class="phase-btn" onclick="showPhase(2)" id="phase-2">
                <span>🎯 BOSS Framework</span>
                <span class="phase-time">(20 min)</span>
            </button>
            <button class="phase-btn" onclick="showPhase(3)" id="phase-3">
                <span>💪 Practice</span>
                <span class="phase-time">(25 min)</span>
            </button>
            <button class="phase-btn" onclick="showPhase(4)" id="phase-4">
                <span>🚀 Commit</span>
                <span class="phase-time">(15 min)</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Phase 1: Energy Check-In -->
            <div class="phase-content active" id="content-0">
                <h2>⚡ Your Energy Check-In</h2>
                <p style="text-align: center; font-size: 1.1em; margin: 20px 0;">Before we dive into boss energy, let's check what energy you're bringing to the room today.</p>
                
                <div style="background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(253, 121, 168, 0.1)); padding: 30px; border-radius: 20px; margin: 25px 0;">
                    <h3 style="text-align: center; margin-bottom: 25px;">What's Your Current Vibe?</h3>
                    <p style="text-align: center; margin-bottom: 25px;">Imagine your energy as a color, texture, or weather pattern right now...</p>
                    
                    <div class="energy-visualization">
                        <div class="energy-option" onclick="selectEnergy(this, 'Lightning')" data-energy="Lightning">
                            <span class="energy-icon">⚡</span>
                            <div><strong>Lightning</strong></div>
                            <small>Buzzing, electric, intense</small>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'Ocean')" data-energy="Ocean">
                            <span class="energy-icon">🌊</span>
                            <div><strong>Ocean</strong></div>
                            <small>Flowing, deep, moving</small>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'Mountain')" data-energy="Mountain">
                            <span class="energy-icon">🏔️</span>
                            <div><strong>Mountain</strong></div>
                            <small>Solid, grounded, still</small>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'Fire')" data-energy="Fire">
                            <span class="energy-icon">🔥</span>
                            <div><strong>Fire</strong></div>
                            <small>Hot, passionate, burning</small>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'Cloud')" data-energy="Cloud">
                            <span class="energy-icon">☁️</span>
                            <div><strong>Cloud</strong></div>
                            <small>Soft, floating, light</small>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'Storm')" data-energy="Storm">
                            <span class="energy-icon">🌪️</span>
                            <div><strong>Storm</strong></div>
                            <small>Chaotic, powerful, wild</small>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 25px; border-radius: 16px; border: 3px solid var(--secondary-cool); margin: 25px 0;">
                    <h4 style="color: var(--secondary-cool); margin-bottom: 15px;">Grounding Moment</h4>
                    <ol style="line-height: 1.8;">
                        <li><strong>Notice:</strong> Is your energy scattered like confetti? Heavy like a weighted blanket?</li>
                        <li><strong>No judgment</strong> - just curious awareness of what's true for you today</li>
                        <li><strong>Take three deep breaths</strong> and imagine gathering your energy closer to you</li>
                        <li><strong>Remember:</strong> Boss energy isn't about being perfect or "on" all the time</li>
                    </ol>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-boss" onclick="completePhase(0)">
                        <span>I'm Ready →</span>
                    </button>
                </div>
            </div>

            <!-- Phase 2: Check-In -->
            <div class="phase-content" id="content-1">
                <h2>💭 Real Talk Check-In</h2>
                <p style="text-align: center; font-size: 1.1em; margin: 20px 0;">Choose what feels most real for you today (click any that resonate):</p>

                <div class="checkin-grid">
                    <div class="checkin-card">
                        <h3>⚡ Current Vibe</h3>
                        <ul class="checkin-prompts">
                            <li onclick="selectPrompt(this)">Running on empty vs. fully charged?</li>
                            <li onclick="selectPrompt(this)">If my mood was a song right now...</li>
                            <li onclick="selectPrompt(this)">What my nervous system needs most...</li>
                            <li onclick="selectPrompt(this)">The energy I'm bringing today...</li>
                        </ul>
                    </div>

                    <div class="checkin-card">
                        <h3>😤 Boundary Struggles</h3>
                        <ul class="checkin-prompts">
                            <li onclick="selectPrompt(this)">Where I'm saying yes when I mean no...</li>
                            <li onclick="selectPrompt(this)">The situation I'm dreading...</li>
                            <li onclick="selectPrompt(this)">When I couldn't speak up recently...</li>
                            <li onclick="selectPrompt(this)">The person I can't say no to...</li>
                        </ul>
                    </div>

                    <div class="checkin-card">
                        <h3>💪 Growth & Wins</h3>
                        <ul class="checkin-prompts">
                            <li onclick="selectPrompt(this)">When I surprised myself by standing up...</li>
                            <li onclick="selectPrompt(this)">A boundary I'm proud of setting...</li>
                            <li onclick="selectPrompt(this)">How I've gotten stronger lately...</li>
                            <li onclick="selectPrompt(this)">A time I used my voice...</li>
                        </ul>
                    </div>

                    <div class="checkin-card">
                        <h3>🎯 What I Want</h3>
                        <ul class="checkin-prompts">
                            <li onclick="selectPrompt(this)">What boss energy would look like for me...</li>
                            <li onclick="selectPrompt(this)">Where I want to feel more confident...</li>
                            <li onclick="selectPrompt(this)">The support I need to say no...</li>
                            <li onclick="selectPrompt(this)">How I want to feel after today...</li>
                        </ul>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(116, 185, 255, 0.1)); padding: 25px; border-radius: 16px; margin: 25px 0;">
                    <h4>Share What's Real (Optional)</h4>
                    <textarea class="response-input" placeholder="What's coming up for you? What do you need today? (This stays private unless you choose to share)" id="checkin-response"></textarea>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-energy" onclick="completePhase(1)">
                        <span>Let's Learn →</span>
                    </button>
                </div>
            </div>

            <!-- Phase 3: BOSS Framework -->
            <div class="phase-content" id="content-2">
                <h2>🎯 The BOSS Framework</h2>
                
                <div style="background: var(--gradient-boss); color: white; padding: 30px; border-radius: 20px; margin: 25px 0; text-align: center;">
                    <h3 style="font-size: 1.8em; margin-bottom: 15px;">What is Boss Energy?</h3>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">It's not about being mean or aggressive.</p>
                    <p style="font-size: 1.4em; font-weight: 700;">Boss Energy = Confident + Clear + Caring</p>
                    <p style="margin-top: 15px;">You're the boss of YOUR life - knowing what you need and communicating it clearly.</p>
                </div>

                <div class="boss-framework">
                    <div class="boss-step">
                        <span class="boss-letter">B</span>
                        <div class="boss-title">Breathe First</div>
                        <div class="boss-description">
                            Before reacting, take a breath. Boss energy comes from your centered self, not your reactive self.
                        </div>
                    </div>

                    <div class="boss-step">
                        <span class="boss-letter">O</span>
                        <div class="boss-title">Own Your Truth</div>
                        <div class="boss-description">
                            You have the right to your feelings, needs, and boundaries. No apologies for being human.
                        </div>
                    </div>

                    <div class="boss-step">
                        <span class="boss-letter">S</span>
                        <div class="boss-title">Speak Clearly</div>
                        <div class="boss-description">
                            Use clean, direct communication. Say what you mean without being mean about it.
                        </div>
                    </div>

                    <div class="boss-step">
                        <span class="boss-letter">S</span>
                        <div class="boss-title">Stay Connected</div>
                        <div class="boss-description">
                            Setting boundaries doesn't mean being harsh. You can be firm AND kind.
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 30px; border-radius: 20px; border: 3px solid var(--warning); margin: 25px 0;">
                    <h3 style="color: var(--warning); margin-bottom: 20px;">💯 Real Talk Moment</h3>
                    <p style="font-size: 1.05em; line-height: 1.7;">Let's be honest - this stuff is HARD. Especially when you're used to saying yes to everything, or when you're scared people will be mad at you.</p>
                    
                    <div style="margin: 20px 0;">
                        <h4>Common Boss Energy Blockers:</h4>
                        <ul style="line-height: 1.8;">
                            <li>"But what if they get mad?"</li>
                            <li>"I don't want to hurt their feelings"</li>
                            <li>"Maybe I'm being too sensitive"</li>
                            <li>"I should just suck it up"</li>
                        </ul>
                    </div>
                    
                    <p style="background: var(--gradient-energy); color: white; padding: 15px; border-radius: 12px; font-weight: 600; text-align: center;">
                        Reality Check: Other people's emotions about your boundaries are NOT your responsibility to manage.
                    </p>
                </div>

                <div class="boss-phrases">
                    <h4 style="width: 100%; margin-bottom: 15px;">Magic Phrases to Practice:</h4>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"I need..."</div>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"That doesn't work for me"</div>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"I've decided..."</div>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"Let me think about it"</div>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"I care about you AND..."</div>
                    <div class="phrase-chip" onclick="copyPhrase(this)">"I'm not available for that"</div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-boss" onclick="completePhase(2)">
                        <span>Time to Practice →</span>
                    </button>
                </div>
            </div>

            <!-- Phase 4: Practice -->
            <div class="phase-content" id="content-3">
                <h2>💪 Boss Energy in Action</h2>
                <p style="text-align: center; font-size: 1.1em; margin: 20px 0;">Choose scenarios that feel most relevant to your life right now:</p>

                <div class="scenario-grid">
                    <div class="scenario-card" onclick="selectScenario(this, 0)">
                        <div class="scenario-header">
                            <div class="scenario-icon" style="background: var(--gradient-boss);">👥</div>
                            <div class="scenario-title">Friend Drama</div>
                        </div>
                        <ul class="scenario-examples">
                            <li>Friend venting for hours, draining your energy</li>
                            <li>Pressure to hang out when you need space</li>
                            <li>Group chat that's become toxic</li>
                            <li>Friends pushing you to do something unsafe</li>
                        </ul>
                    </div>

                    <div class="scenario-card" onclick="selectScenario(this, 1)">
                        <div class="scenario-header">
                            <div class="scenario-icon" style="background: var(--gradient-energy);">🏠</div>
                            <div class="scenario-title">Family Boundaries</div>
                        </div>
                        <ul class="scenario-examples">
                            <li>Parents commenting on food/body</li>
                            <li>Invasive questions about treatment</li>
                            <li>Expected to manage family emotions</li>
                            <li>Holiday pressure around appearance</li>
                        </ul>
                    </div>

                    <div class="scenario-card" onclick="selectScenario(this, 2)">
                        <div class="scenario-header">
                            <div class="scenario-icon" style="background: var(--gradient-cool);">📚</div>
                            <div class="scenario-title">School Stress</div>
                        </div>
                        <ul class="scenario-examples">
                            <li>Teacher making unrealistic demands</li>
                            <li>Doing all the work in group projects</li>
                            <li>Overwhelmed with responsibilities</li>
                            <li>Academic competition pressure</li>
                        </ul>
                    </div>

                    <div class="scenario-card" onclick="selectScenario(this, 3)">
                        <div class="scenario-header">
                            <div class="scenario-icon" style="background: var(--gradient-confidence);">💜</div>
                            <div class="scenario-title">Recovery Specific</div>
                        </div>
                        <ul class="scenario-examples">
                            <li>Comments on your food choices</li>
                            <li>Pressure to engage in diet talk</li>
                            <li>Friends not understanding recovery</li>
                            <li>Advocating for accommodations</li>
                        </ul>
                    </div>
                </div>

                <div class="practice-area" id="practiceArea" style="display: none;">
                    <h3>Now Let's Practice!</h3>
                    <div class="practice-prompt" id="practicePrompt">
                        Select a scenario above to start practicing your BOSS response
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 12px; margin: 20px 0;">
                        <h4>Apply the BOSS Framework:</h4>
                        <ol style="line-height: 1.8;">
                            <li><strong>Breathe:</strong> What do you notice in your body?</li>
                            <li><strong>Own:</strong> What are your actual needs here?</li>
                            <li><strong>Speak:</strong> What would you say? (Use the exact words)</li>
                            <li><strong>Stay Connected:</strong> How can you be firm AND kind?</li>
                        </ol>
                    </div>

                    <textarea class="response-input" placeholder="Practice your BOSS response here... What would you actually say?" id="practice-response"></textarea>

                    <div class="boss-phrases">
                        <h5>Starter Phrases:</h5>
                        <div class="phrase-chip" onclick="addToResponse('I appreciate you AND...')">"I appreciate you AND..."</div>
                        <div class="phrase-chip" onclick="addToResponse('I need to take care of myself...')">"I need to take care of myself..."</div>
                        <div class="phrase-chip" onclick="addToResponse('That doesn\'t work for me because...')">"That doesn't work for me because..."</div>
                        <div class="phrase-chip" onclick="addToResponse('I\'ve decided to...')">"I've decided to..."</div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-cool" onclick="completePhase(3)">
                        <span>Ready to Commit →</span>
                    </button>
                </div>
            </div>

            <!-- Phase 5: Commitment -->
            <div class="phase-content" id="content-4">
                <h2>🚀 Your Boss Energy Commitment</h2>

                <div class="commitment-card">
                    <h3>✨ Integration Moment</h3>
                    <p>Stand up if you can. Feel your feet on the ground. This is YOUR life, and you get to be the boss of it.</p>
                </div>

                <div style="background: white; padding: 35px; border-radius: 20px; margin: 25px 0; border: 3px solid var(--primary-bold);">
                    <h3 style="color: var(--primary-bold); margin-bottom: 20px;">🎯 This Week's Boss Energy Goal</h3>
                    <p style="font-size: 1.05em; margin-bottom: 20px;">What's ONE specific way you want to practice boss energy this week? Make it small and doable.</p>
                    
                    <div style="background: var(--neutral-light); padding: 20px; border-radius: 12px; margin: 20px 0;">
                        <h4>Examples:</h4>
                        <ul style="text-align: left; line-height: 1.8;">
                            <li>"I'll say 'let me think about it' instead of automatic yes"</li>
                            <li>"I'll set a time limit for venting sessions"</li>
                            <li>"I'll use 'that doesn't work for me' at least once"</li>
                            <li>"I'll take a breath before responding to requests"</li>
                        </ul>
                    </div>

                    <input type="text" class="commitment-input" id="commitment-text" placeholder="My boss energy commitment this week..." />
                </div>

                <div style="background: var(--gradient-energy); color: white; padding: 30px; border-radius: 20px; margin: 25px 0;">
                    <h3>🔥 Group Power-Up</h3>
                    <p style="font-size: 1.1em; margin: 20px 0;">One word that represents the boss energy you want to step into:</p>
                    <input type="text" class="commitment-input" id="power-word" placeholder="Your power word..." style="background: rgba(255,255,255,0.9); color: var(--text-primary);" />
                </div>

                <div style="text-align: center; margin: 40px 0;">
                    <h3 style="color: var(--primary-bold); margin-bottom: 20px;">💪 Remember</h3>
                    <p style="font-size: 1.2em; font-style: italic; color: var(--text-secondary); margin-bottom: 30px;">
                        "You've got the right to take up space, have needs, and communicate them clearly. That's not selfish - that's self-respect."
                    </p>
                    <button class="btn btn-boss" onclick="completeSession()" style="font-size: 18px; padding: 18px 40px;">
                        <span>⚡ Activate Boss Energy ⚡</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- Session Summary -->
        <div id="sessionSummary">
            <h2 style="font-size: 2.5em; margin-bottom: 20px;">⚡ BOSS MODE ACTIVATED! ⚡</h2>
            <p style="font-size: 1.2em; margin-bottom: 35px;">You just leveled up your boundary-setting game!</p>
            
            <div class="summary-badge">
                <h3 style="font-size: 1.5em; margin-bottom: 15px;">🔥 You Did It!</h3>
                <p style="font-size: 1.1em;">You're ready to use your boss energy in the real world.</p>
            </div>
            
            <div style="background: var(--neutral-light); padding: 25px; border-radius: 16px; margin: 25px 0;">
                <h3 style="margin-bottom: 15px;">📱 Your Boss Energy Toolkit:</h3>
                <ul style="text-align: left; max-width: 500px; margin: 0 auto; line-height: 1.8;">
                    <li><strong>B</strong> - Breathe First</li>
                    <li><strong>O</strong> - Own Your Truth</li>
                    <li><strong>S</strong> - Speak Clearly</li>
                    <li><strong>S</strong> - Stay Connected</li>
                </ul>
            </div>

            <div style="background: var(--gradient-boss); color: white; padding: 25px; border-radius: 16px; margin: 25px 0;">
                <h3 style="margin-bottom: 15px;">⚡ Keep Growing</h3>
                <p style="font-size: 1.05em;">Practice your boss energy every day. Start small, be patient with yourself, and remember - boundaries are an act of self-love.</p>
            </div>
            
            <button class="btn btn-energy" onclick="resetSession()" style="margin-top: 20px;">
                <span>Start New Session</span>
            </button>
        </div>
    </div>

    <script>
        // Application State
        var AppState = {
            currentPhase: 0,
            completedPhases: [],
            selectedEnergy: '',
            selectedPrompts: [],
            selectedScenario: null,
            soundEnabled: true,
            sessionStartTime: new Date(),
            responses: {
                checkin: '',
                practice: '',
                commitment: '',
                powerWord: ''
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            updateProgress();
            setupEventListeners();
        }

        // Phase Navigation
        function showPhase(phaseIndex) {
            if (phaseIndex < 0 || phaseIndex > 4) return;
            
            // Hide all phases
            var contents = document.querySelectorAll('.phase-content');
            for (var i = 0; i < contents.length; i++) {
                contents[i].classList.remove('active');
            }
            
            // Show selected phase
            setTimeout(function() {
                var targetContent = document.getElementById('content-' + phaseIndex);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            }, 100);
            
            // Update navigation
            updatePhaseButtons(phaseIndex);
            
            AppState.currentPhase = phaseIndex;
            updateProgress();
            playSound('transition');
            
            // Scroll to top
            document.querySelector('.content-area').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function updatePhaseButtons(activeIndex) {
            var buttons = document.querySelectorAll('.phase-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
                buttons[i].setAttribute('aria-current', 'false');
                
                if (i === activeIndex) {
                    buttons[i].classList.add('active');
                    buttons[i].setAttribute('aria-current', 'true');
                }
                
                if (AppState.completedPhases.indexOf(i) !== -1) {
                    buttons[i].classList.add('completed');
                }
            }
        }

        function completePhase(phaseIndex) {
            if (AppState.completedPhases.indexOf(phaseIndex) === -1) {
                AppState.completedPhases.push(phaseIndex);
                document.getElementById('phase-' + phaseIndex).classList.add('completed');
                playSound('success');
                showNotification('Level Up! 🔥');
            }
            
            // Save responses
            saveResponses();
            
            // Auto-advance
            if (phaseIndex < 4) {
                setTimeout(function() {
                    showPhase(phaseIndex + 1);
                }, 1500);
            }
            
            updateProgress();
        }

        function updateProgress() {
            var progress = (AppState.completedPhases.length / 5) * 100;
            var progressFill = document.getElementById('progressFill');
            var progressPercentage = document.getElementById('progressPercentage');
            
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
            
            if (progressPercentage) {
                progressPercentage.textContent = Math.round(progress) + '%';
            }
        }

        // Energy Selection
        function selectEnergy(element, energy) {
            var options = document.querySelectorAll('.energy-option');
            for (var i = 0; i < options.length; i++) {
                options[i].classList.remove('selected');
            }
            
            element.classList.add('selected');
            AppState.selectedEnergy = energy;
            playSound('select');
            showNotification('Energy: ' + energy + ' ⚡');
        }

        // Prompt Selection
        function selectPrompt(element) {
            element.classList.toggle('selected');
            var promptText = element.textContent;
            
            var index = AppState.selectedPrompts.indexOf(promptText);
            if (index === -1) {
                AppState.selectedPrompts.push(promptText);
            } else {
                AppState.selectedPrompts.splice(index, 1);
            }
            
            playSound('select');
        }

        // Scenario Selection
        function selectScenario(element, index) {
            var cards = document.querySelectorAll('.scenario-card');
            for (var i = 0; i < cards.length; i++) {
                cards[i].classList.remove('active');
            }
            
            element.classList.add('active');
            AppState.selectedScenario = index;
            
            // Show practice area
            var practiceArea = document.getElementById('practiceArea');
            if (practiceArea) {
                practiceArea.style.display = 'block';
                
                // Update prompt based on scenario
                var prompts = [
                    "Your friend has been venting to you for an hour and you need to set a boundary...",
                    "A family member comments on your eating habits and you need to respond...",
                    "Your teacher assigns extra work when you're already overwhelmed...",
                    "Someone makes a triggering comment about food/body and you need to advocate for yourself..."
                ];
                
                document.getElementById('practicePrompt').textContent = prompts[index];
                
                // Scroll to practice area
                practiceArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            playSound('select');
        }

        // Add phrase to response
        function addToResponse(phrase) {
            var textarea = document.getElementById('practice-response');
            if (textarea) {
                if (textarea.value) {
                    textarea.value += ' ' + phrase;
                } else {
                    textarea.value = phrase;
                }
                textarea.focus();
            }
            playSound('select');
        }

        // Copy phrase
        function copyPhrase(element) {
            var phrase = element.textContent;
            showNotification('Phrase ready: ' + phrase);
            playSound('star');
        }

        // Complete Session
        function completeSession() {
            saveResponses();
            
            document.querySelector('.content-area').style.display = 'none';
            document.querySelector('.phase-nav').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.getElementById('sessionSummary').style.display = 'block';
            
            playSound('completion');
        }

        function resetSession() {
            AppState.currentPhase = 0;
            AppState.completedPhases = [];
            AppState.selectedEnergy = '';
            AppState.selectedPrompts = [];
            AppState.selectedScenario = null;
            AppState.responses = {
                checkin: '',
                practice: '',
                commitment: '',
                powerWord: ''
            };
            
            // Reset UI
            document.querySelector('.content-area').style.display = 'block';
            document.querySelector('.phase-nav').style.display = 'flex';
            document.querySelector('.progress-container').style.display = 'block';
            document.getElementById('sessionSummary').style.display = 'none';
            
            // Clear selections
            document.querySelectorAll('.selected').forEach(function(el) {
                el.classList.remove('selected');
            });
            document.querySelectorAll('.completed').forEach(function(el) {
                el.classList.remove('completed');
            });
            document.querySelectorAll('.active').forEach(function(el) {
                el.classList.remove('active');
            });
            
            // Clear inputs
            document.querySelectorAll('textarea, input[type="text"]').forEach(function(el) {
                el.value = '';
            });
            
            showPhase(0);
            showNotification('Fresh Start! ⚡');
        }

        // Save Responses
        function saveResponses() {
            var checkinResponse = document.getElementById('checkin-response');
            if (checkinResponse) {
                AppState.responses.checkin = checkinResponse.value;
            }
            
            var practiceResponse = document.getElementById('practice-response');
            if (practiceResponse) {
                AppState.responses.practice = practiceResponse.value;
            }
            
            var commitmentText = document.getElementById('commitment-text');
            if (commitmentText) {
                AppState.responses.commitment = commitmentText.value;
            }
            
            var powerWord = document.getElementById('power-word');
            if (powerWord) {
                AppState.responses.powerWord = powerWord.value;
            }
            
            // In production, this would save to backend
            console.log('Session data:', AppState);
        }

        // Sound Management
        function toggleSound() {
            AppState.soundEnabled = !AppState.soundEnabled;
            var icon = document.getElementById('sound-icon');
            icon.textContent = AppState.soundEnabled ? '🔊' : '🔇';
            
            if (AppState.soundEnabled) {
                playSound('select');
            }
        }

        function playSound(type) {
            if (!AppState.soundEnabled) return;
            
            try {
                var audioContext = new (window.AudioContext || window.webkitAudioContext)();
                var oscillator = audioContext.createOscillator();
                var gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                var frequencies = {
                    'transition': 523.25,
                    'select': 659.25,
                    'success': 783.99,
                    'star': 880,
                    'completion': 1046.50
                };
                
                oscillator.frequency.value = frequencies[type] || 440;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.02);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log('Audio not supported:', e);
            }
        }

        // Notifications
        function showNotification(message) {
            var notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(function() {
                notification.style.animation = 'slideDown 0.3s ease-out';
                setTimeout(function() {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS for slide down animation
        var style = document.createElement('style');
        style.textContent = '@keyframes slideDown { from { transform: translateX(-50%) translateY(0); opacity: 1; } to { transform: translateX(-50%) translateY(100px); opacity: 0; } }';
        document.head.appendChild(style);

        // Event Listeners
        function setupEventListeners() {
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Alt + number for phase navigation
                if (e.altKey && e.key >= '1' && e.key <= '5') {
                    showPhase(parseInt(e.key) - 1);
                }
                
                // Alt + S for sound toggle
                if (e.altKey && e.key === 's') {
                    toggleSound();
                }
                
                // Escape to close notifications
                if (e.key === 'Escape') {
                    var notifications = document.querySelectorAll('.notification');
                    notifications.forEach(function(n) {
                        if (n.parentNode) {
                            document.body.removeChild(n);
                        }
                    });
                }
            });
            
            // Auto-save on input
            document.addEventListener('input', function(e) {
                if (e.target.matches('textarea, input[type="text"]')) {
                    clearTimeout(window.saveTimeout);
                    window.saveTimeout = setTimeout(saveResponses, 1000);
                }
            });
            
            // Prevent accidental navigation
            window.addEventListener('beforeunload', function(e) {
                if (AppState.completedPhases.length > 0 && AppState.completedPhases.length < 5) {
                    e.preventDefault();
                    e.returnValue = 'You have an incomplete session. Are you sure you want to leave?';
                }
            });
        }

        // Responsive adjustments
        function checkScreenSize() {
            var width = window.innerWidth;
            
            if (width < 768) {
                document.body.classList.add('mobile');
            } else {
                document.body.classList.remove('mobile');
            }
        }

        window.addEventListener('resize', checkScreenSize);
        checkScreenSize();

        // Check for reduced motion preference
        function checkReducedMotion() {
            var prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            
            if (prefersReducedMotion) {
                var style = document.createElement('style');
                style.textContent = '*, *::before, *::after { animation-duration: 0.01s !important; transition-duration: 0.01s !important; }';
                document.head.appendChild(style);
            }
        }
        checkReducedMotion();

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('Application error:', e);
            showNotification('Something went wrong. Please refresh if issues persist.');
        });
    </script>
</body>
</html>